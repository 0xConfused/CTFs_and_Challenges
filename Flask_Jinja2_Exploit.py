#!/usr/bin/env python3

import requests

req = requests.session()
URL = 'http://139.59.178.146:31365/'

def sendRequest(inpt):
    newURL = URL + '{{' + inpt + '}}'
    html = req.get(newURL)
    try:
        plaintext = html.text.split("\'<str>")[1].split("</str>\'")[0]
        print('[Success] Response: ' + plaintext, end='\n')
    except:
        print('[Failure] Server Error')


breakLoop = False
print('[Starting...] type \'dropSocket\' to leave')
while not breakLoop:
    val = input(f'[Request] Request for {URL}: ')
    if val == 'dropSocket':
        break
    else:
        print(f'Sending \'{val}\' to \'{URL}\'', end='\n')
        sendRequest(val)